<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImplementaciÃ³n del Generador de DocumentaciÃ³n</title>
    <!-- Incluir los estilos CSS de tu plantilla original aquÃ­ -->
    <link rel="stylesheet" href="style.css">
    <!-- Highlight.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" id="hljs-light">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-dark" disabled>
        <!-- Incluir el script del generador -->
    <!-- Highlight.js JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
    
    <script src="doc.js"></script>
    <script src="api-doc-generator.js"></script>
    <script src="main.js"></script>
    
    <!-- Script para cargar y generar la documentaciÃ³n -->
    <script>
      // Cargar la documentaciÃ³n al iniciar la pÃ¡gina
        document.addEventListener('DOMContentLoaded', function() {
            // OpciÃ³n 1: Cargar desde archivo JSON
             loadFromJSON('api-config.json');
            // OpciÃ³n 2: Cargar desde archivo YAML
            // loadFromYAML('api-config.yaml');
            
            // Initialize search modal
            initializeSearchModal();
            
            // Initialize Highlight.js theme switching
            initializeHighlightTheme();
        });
        
        // Function to initialize Highlight.js theme switching
        function initializeHighlightTheme() {
            // Function to update Highlight.js theme
            function updateHighlightTheme() {
                const isDarkMode = document.body.classList.contains('dark-mode');
                const lightTheme = document.getElementById('hljs-light');
                const darkTheme = document.getElementById('hljs-dark');
                
                if (isDarkMode) {
                    lightTheme.disabled = true;
                    darkTheme.disabled = false;
                } else {
                    lightTheme.disabled = false;
                    darkTheme.disabled = true;
                }
            }
            
            // Update theme on page load
            updateHighlightTheme();
            
            // Listen for theme changes (if there's a theme toggle function)
            if (typeof window.toggleTheme === 'function') {
                const originalToggleTheme = window.toggleTheme;
                window.toggleTheme = function() {
                    originalToggleTheme.call(this);
                    setTimeout(updateHighlightTheme, 100);
                };
            }
            
            // Also listen for manual dark mode class changes
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                        updateHighlightTheme();
                    }
                });
            });
            
            observer.observe(document.body, {
                attributes: true,
                attributeFilter: ['class']
            });
        }
    </script>
</head>
<body>
     <!-- Widget AI Assistant -->
    <div class="ai-assistant-widget">
        <!-- BotÃ³n flotante -->
        <button class="ai-assistant-button minimized" id="aiAssistantButton">
            ðŸ¤–
        </button>

        <!-- Container del chat -->
        <div class="ai-chat-container" id="aiChatContainer">
            <div class="ai-chat-header">
                <div class="ai-chat-title">
                    ðŸ¤– Asistente IA - DocumentaciÃ³n
                </div>
                <button class="ai-close-button" id="aiCloseButton">âœ•</button>
            </div>

            <div class="ai-chat-messages" id="aiChatMessages">
                <div class="message bot">
                    <div class="message-bubble">
                        Â¡Hola! ðŸ‘‹ Soy tu asistente de IA para la documentaciÃ³n de la API de GestiÃ³n de Ã“rdenes. Puedes preguntarme cualquier cosa sobre los endpoints, parÃ¡metros, ejemplos de uso y mÃ¡s. Â¿En quÃ© puedo ayudarte hoy?
                    </div>
                    <div class="message-time">Ahora</div>
                </div>
            </div>

            <div class="loading-indicator" id="loadingIndicator">
                <span class="loading-dots">Procesando tu pregunta</span>
            </div>

            <div class="ai-chat-input-area">
                <div class="ai-input-container">
                    <textarea 
                        class="ai-input-field" 
                        id="aiInputField" 
                        placeholder="Escribe tu pregunta sobre la API..." 
                        rows="1"
                    ></textarea>
                    <button class="ai-send-button" id="aiSendButton">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22,2 15,22 11,13 2,9 22,2"></polygon>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Tu estructura HTML original aquÃ­ -->
    <div class="header">
        <div class="logo">
            <!-- Logo se generarÃ¡ automÃ¡ticamente -->
        </div>
        <div class="header-actions">
            <input type="text" class="search-box" placeholder="Buscar endpoints..." id="searchBox">
            <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™</button>
        </div>
    </div>

    <!-- Search Modal -->
    <div class="search-modal" id="searchModal">
        <div class="search-modal-overlay" id="searchModalOverlay"></div>
        <div class="search-modal-content">
            <div class="search-modal-header">
                <div class="search-input-container">
                    <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <input type="text" class="search-modal-input" id="searchModalInput" placeholder="Buscar endpoints...">
                    <kbd class="search-shortcut">ESC</kbd>
                </div>
            </div>
            <div class="search-modal-body">
                <div class="search-results" id="searchResults">
                    <div class="search-empty-state">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        <p>Escribe para buscar endpoints</p>
                    </div>
                </div>
            </div>
            <div class="search-modal-footer">
                <div class="search-shortcuts">
                    <kbd>â†‘</kbd><kbd>â†“</kbd> para navegar
                    <kbd>Enter</kbd> para seleccionar
                    <kbd>ESC</kbd> para cerrar
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="sidebar">
            <!-- Sidebar se generarÃ¡ automÃ¡ticamente -->
        </div>
        
        <div class="main-content">
            <!-- Contenido principal se generarÃ¡ automÃ¡ticamente -->
        </div>
    </div>

    <div class="code-sidebar">
        
        <div class="section-urls" style="margin-top: 50px;">
          <div class="response-header">
            <span class="response-text">Servicios web</span>
          </div>
          <div class="response-content">
            <!-- Lista de endpoints -->
        </div>
        <!-- Code sidebar se generarÃ¡ automÃ¡ticamente -->
    </div>
</div>

</body>
</html>